<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Data Science at the Command Line &#8211; EK</title>
<meta name="description" content="Notes from book

">
<meta name="keywords" content="linux, cli">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Data Science at the Command Line">
<meta name="twitter:description" content="Notes from book

">
<meta name="twitter:site" content="@jivoi">
<meta name="twitter:creator" content="@jivoi">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jivoi.github.io/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_GB">
<meta property="og:type" content="article">
<meta property="og:title" content="Data Science at the Command Line">
<meta property="og:description" content="Notes from book

">
<meta property="og:url" content="https://jivoi.github.io/2015/07/10/data-science-at-the-command-line/">
<meta property="og:site_name" content="EK">





<link rel="canonical" href="https://jivoi.github.io/2015/07/10/data-science-at-the-command-line/">
<link href="https://jivoi.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="EK Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://jivoi.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="https://jivoi.github.io/assets/js/vendor/html5shiv.min.js"></script>
	<script src="https://jivoi.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://jivoi.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://jivoi.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://jivoi.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://jivoi.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://jivoi.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://jivoi.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://jivoi.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://jivoi.github.io/">EK</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="https://jivoi.github.io/archive/" >Archive</a></li>
				
				    
				        
				    
				    <li><a href="https://jivoi.github.io/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="https://jivoi.github.io/feed.xml" >Feed</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    



	<img src="https://jivoi.github.io/images/avatar.jpg" class="bio-photo" alt="EK bio photo">

<h3>EK</h3>
<p>I'm a hacker and security researcher</p>
<a href="mailto:ekoz@protonmail.com" class="author-widgets" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/jivoi" class="author-widgets" target="_blank"><i class="fa fa-fw fa-tw-square"></i> Twitter</a>





<a href="http://github.com/jivoi" class="author-widgets" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>










  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="https://jivoi.github.io/2015/07/10/data-science-at-the-command-line/" rel="bookmark" title="Data Science at the Command Line">Data Science at the Command Line</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>Notes from book</p>

<h3 id="urls">Urls</h3>
<ul>
  <li><a href="http://datascienceatthecommandline.com/">http://datascienceatthecommandline.com/</a></li>
  <li><a href="http://jeroenjanssens.com/2013/09/19/seven-command-line-tools-for-data-science.html">seven-command-line-tools-for-data-science</a></li>
</ul>

<h3 id="ch02---getting-started">CH02 - Getting Started</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># install tools</span>
mkdir datascience
<span class="nb">cd </span>datascience
vagrant init data-science-toolbox/data-science-at-the-command-line
vagrant up

<span class="c"># github</span>
git clone https://github.com/jeroenjanssens/data-science-at-the-command-line.git

<span class="c"># jq</span>
https://stedolan.github.io/jq/download/

<span class="c"># json2csv</span>
https://github.com/jehiah/json2csv
go get github.com/jehiah/json2csv

<span class="c"># xml2json</span>
https://github.com/buglabs/node-xml2json

<span class="c"># csvkit</span>
pip install csvkit <span class="o">(</span>in2csv, sql2csv, csvlook, csvsql<span class="o">)</span></code></pre></div>

<h3 id="ch03---obtaining-data">CH03 - Obtaining Data</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># playing with some cli tools</span>

parallel -j1 --progress --delay 0.1 --results results <span class="s2">&quot;curl -sL &quot;&quot;&#39;http://api.nytimes.com/svc/search/v2/articlesearch.json?q=New+York+&#39;&quot;&quot;&#39;Fashion+Week&amp;begin_date={1}0101&amp;end_date={1}1231&amp;page={2}&amp;api-key=&#39;&quot;&quot;&#39;&lt;your-api-key&gt;&#39;&quot;</span> ::: <span class="o">{</span>2009..2013<span class="o">}</span> ::: <span class="o">{</span>0..99<span class="o">}</span> &gt; /dev/null

cat results/1/*/2/*/stdout <span class="p">|</span> jq -c <span class="s1">&#39;.response.docs[] | {date: .pub_date, type: .document_type, &#39;&#39;title: .headline.main }&#39;</span> <span class="p">|</span> json2csv -p -k date,type,title &gt; fashion.csv

&lt; fashion.csv cols -c date cut -dT -f1 <span class="p">|</span> head <span class="p">|</span> csvlook

&lt; fashion.csv Rio -ge <span class="s1">&#39;g + geom_freqpoly(aes(as.Date(date), color=type), &#39;&#39;binwidth=7) + scale_x_date() + labs(x=&quot;date&quot;, title=&quot;Coverage of New York&#39;&#39; Fashion Week in New York Times&quot;)&#39;</span> <span class="p">|</span> display

<span class="c"># in2csv - able to convert Microsoft Excel spreadsheets to CSV files</span>
<span class="nv">$ </span>in2csv data/imdb-250.xlsx &gt; data/imdb-250.csv

<span class="c"># csvlook - nicely format the data into a table</span>
<span class="nv">$ </span>in2csv data/imdb-250.xlsx <span class="p">|</span> head <span class="p">|</span> csvcut -c Title,Year,Rating <span class="p">|</span> csvlook

<span class="c"># sql2csv - querying relational databases</span>
<span class="nv">$ </span>sql2csv --db <span class="s1">&#39;sqlite:///data/iris.db&#39;</span> --query <span class="s1">&#39;SELECT * FROM iris &#39;&#39;WHERE sepal_length &gt; 7.5&#39;</span>

<span class="c"># jq - commandline JSON processor</span>
<span class="nv">$ </span>curl -s http://api.randomuser.me <span class="p">|</span> jq <span class="s1">&#39;.&#39;</span>

<span class="c"># curlicue - to log in api using the OAuth protocol</span>
<span class="nv">$ </span>curlicue-setup <span class="s1">&#39;https://api.twitter.com/oauth/request_token&#39;</span> <span class="s1">&#39;https://api.twitter.com/oauth/authorize?oauth_token=$oauth_token&#39;</span> <span class="s1">&#39;https://api.twitter.com/oauth/access_token&#39;</span> &gt; credentials
<span class="nv">$ </span>curlicue -f credentials <span class="s1">&#39;https://api.twitter.com/1/statuses/home_timeline.xml&#39;</span></code></pre></div>

<h3 id="ch05---scrubbing-data">CH05 - Scrubbing Data</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># create file that contains 10 lines</span>
<span class="nv">$ </span>seq -f <span class="s2">&quot;Line %g&quot;</span> <span class="m">10</span> <span class="p">|</span> tee lines

<span class="c"># print the first three lines</span>
<span class="nv">$ </span>&lt; lines head -n 3
<span class="nv">$ </span>&lt; lines sed -n <span class="s1">&#39;1,3p&#39;</span>
<span class="nv">$ </span>&lt; lines awk <span class="s1">&#39;NR&lt;=3&#39;</span>

<span class="c"># print the last three lines</span>
<span class="nv">$ </span>&lt; lines tail -n 3

<span class="c"># remove the first three lines</span>
<span class="nv">$ </span>&lt; lines tail -n +4
<span class="nv">$ </span>&lt; lines sed <span class="s1">&#39;1,3d&#39;</span>
<span class="nv">$ </span>&lt; lines sed -n <span class="s1">&#39;1,3!p</span>

<span class="s1"># remove last three lines</span>
<span class="s1">$ &lt; lines head -n -3</span>

<span class="s1"># print (or extract) specific lines</span>
<span class="s1">$ &lt; lines sed -n &#39;</span>4,6p<span class="s1">&#39;</span>
<span class="s1">$ &lt; lines awk &#39;</span><span class="o">(</span>NR&gt;<span class="o">=</span>4<span class="o">)&amp;&amp;(</span>NR&lt;<span class="o">=</span>6<span class="o">)</span><span class="s1">&#39;</span>
<span class="s1">$ &lt; lines head -n 6 | tail -n 3</span>

<span class="s1"># print odd numbered lines</span>
<span class="s1">$ &lt; lines sed -n &#39;</span>1~2p<span class="s1">&#39;</span>
<span class="s1">$ &lt; lines awk &#39;</span>NR%2

<span class="c"># print even numbered lines</span>
<span class="nv">$ </span>&lt; lines sed -n <span class="s1">&#39;0~2p&#39;</span>
<span class="nv">$ </span>&lt; lines awk <span class="s1">&#39;(NR+1)%2&#39;</span>

<span class="c"># grep pattern</span>
<span class="nv">$ </span>grep -E <span class="s1">&#39;^CHAPTER (.*)\. The&#39;</span> alice.txt

<span class="c"># outputting only a certain percentage of data</span>
<span class="nv">$ </span>seq <span class="m">1000</span> <span class="p">|</span> sample -r 1% <span class="p">|</span> jq -c <span class="s1">&#39;{line: .}&#39;</span>
<span class="nv">$ </span>seq <span class="m">10000</span> <span class="p">|</span> sample -r 1% -d <span class="m">1000</span> -s <span class="m">5</span> <span class="p">|</span> jq -c <span class="s1">&#39;{line: .}&#39;</span>

<span class="c"># extract fields</span>
<span class="nv">$ </span>grep -i chapter alice.txt <span class="p">|</span> cut -d<span class="s1">&#39; &#39;</span> -f3-
<span class="nv">$ </span>sed -rn <span class="s1">&#39;s/^CHAPTER ([IVXLCDM]{1,})\. (.*)$/\2/p&#39;</span> alice.txt &gt; /dev/null

<span class="c"># remove set of characters</span>
<span class="nv">$ </span>grep -i chapter alice.txt <span class="p">|</span> cut -c 9-

<span class="c"># create a data set of all the words that start with an “a”</span>
<span class="nv">$ </span>&lt; alice.txt tr <span class="s1">&#39;[:upper:]&#39;</span> <span class="s1">&#39;[:lower:]&#39;</span> <span class="p">|</span> grep -oE <span class="s1">&#39;\w{2,}&#39;</span> <span class="p">|</span> grep -E <span class="s1">&#39;^a.*e$&#39;</span> <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> sort -nr <span class="p">|</span> awk <span class="s1">&#39;{print $2&quot;,&quot;$1}&#39;</span> <span class="p">|</span> header -a word,count <span class="p">|</span> head <span class="p">|</span> csvlook

<span class="c"># one character needs to be replaced</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;hello world!&#39;</span> <span class="p">|</span> tr <span class="s1">&#39; !&#39;</span> <span class="s1">&#39;_?&#39;</span>

<span class="c"># to delete individual characters</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;hello world!&#39;</span> <span class="p">|</span> tr -d -c <span class="s1">&#39;[a-z]&#39;</span>

<span class="c"># convert our text to uppercase</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;hello world!&#39;</span> <span class="p">|</span> tr <span class="s1">&#39;[a-z]&#39;</span> <span class="s1">&#39;[A-Z]&#39;</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;hello world!&#39;</span> <span class="p">|</span> tr <span class="s1">&#39;[:lower:]&#39;</span> <span class="s1">&#39;[:upper:]</span>

<span class="s1"># to change a word, remove repeated spaces, and remove leading spaces</span>
<span class="s1">$ echo &#39;</span> hello world!<span class="s1">&#39; | sed -re &#39;</span>s/hello/bye/<span class="p">;</span>s/<span class="se">\s</span>+/ /g<span class="p">;</span>s/<span class="se">\s</span>+//<span class="s1">&#39;</span>

<span class="s1"># with body cmd you can apply any command-line tool to the file (i.e., everything excluding the header)</span>
<span class="s1">$ echo -e &quot;value\n7\n2\n5\n3&quot; | body sort -n</span>
<span class="s1">$ seq 5 | header -a count | body wc -l</span>

<span class="s1"># header cmd allows us, as the name implies, to manipulate the header of a CSV file</span>
<span class="s1">$ &lt; tips.csv header</span>
<span class="s1">$ seq 5 | header -a count</span>
<span class="s1">$ &lt; iris.csv header -d | head</span>
<span class="s1">$ &lt; iris.csv  header -e &#39;</span>tr <span class="s2">&quot;[:lower:]&quot;</span> <span class="s2">&quot;[:upper:]&quot;</span><span class="s1">&#39;|head</span>
<span class="s1">$ seq 5 | header -a line | body wc -l | header -r count</span>

<span class="s1"># cols cmd allows you to apply a certain command to only a subset of the columns</span>
<span class="s1">$ &lt; tips.csv cols -c day body &quot;tr &#39;</span><span class="o">[</span>a-z<span class="o">]</span><span class="s1">&#39; &#39;</span><span class="o">[</span>A-Z<span class="o">]</span><span class="s1">&#39;&quot; | head -n 5 | csvlook</span>

<span class="s1"># csvsql allows you to execute SQL queries directly on CSV files</span>
<span class="s1">$ seq 5 | header -a value | csvsql --query &quot;SELECT SUM(value) AS sum FROM stdin&quot;</span>
<span class="s1">$ seq 5 | header -a value | csvsql --query &quot;SELECT * FROM stdin&quot;</span>
<span class="s1">$ &lt; iris.csv csvsql --query &quot;SELECT sepal_length, petal_length, sepal_width, petal_width FROM stdin&quot; | csvlook</span>

<span class="s1"># change the attribute &quot;gender&quot; to &quot;sex&quot; using sed</span>
<span class="s1">$ sed -e &#39;</span>s/<span class="s2">&quot;gender&quot;</span>:/<span class="s2">&quot;sex&quot;</span>:/g<span class="s1">&#39; data/users.json | fold | head -n 3</span>

<span class="s1"># working with HTML/XML and JSON</span>
<span class="s1">$ curl -sL &#39;</span>http://en.wikipedia.org/wiki/List_of_countries_and_territories_by_border/area_ratio<span class="s1">&#39; &gt; wiki.html</span>
<span class="s1">$ &lt; wiki.html scrape -b -e &#39;</span>table.wikitable &gt; tr:not<span class="o">(</span>:first-child<span class="o">)</span><span class="s1">&#39;</span>
<span class="s1">$ &lt; table.html xml2json &gt; table.json</span>
<span class="s1">$ &lt; table.json jq &#39;</span>.<span class="s1">&#39; | head -n 25</span>
<span class="s1">$ &lt; table.json jq -c &#39;</span>.html.body.tr<span class="o">[]</span> <span class="p">|</span> <span class="o">{</span>country: .td<span class="o">[</span>1<span class="o">][]</span>,border:.td<span class="o">[</span>2<span class="o">][]</span>, surface: .td<span class="o">[</span>3<span class="o">][]}</span><span class="s1">&#39; &gt; countries.json</span>
<span class="s1">$ &lt; countries.json json2csv -p -k country,border,surface &gt; countries.csv</span>
<span class="s1">$ &lt; countries.json json2csv -p -k country,border,surface |csvlook|head -10</span>
<span class="s1">$ &lt; countries.json json2csv -p -k country,border,surface |cols -c country body &quot;tr &#39;</span><span class="o">[</span>a-z<span class="o">]</span><span class="s1">&#39; &#39;</span><span class="o">[</span>A-Z<span class="o">]</span><span class="s1">&#39;&quot;</span>

<span class="s1"># csvcut cmd allow to extracted and reordered colums</span>
<span class="s1">$ &lt; iris.csv csvcut -c sepal_length,petal_length,sepal_width,petal_width</span>

<span class="s1"># exclude all the bills of which the party size was 4 or less</span>
<span class="s1">$ csvgrep -c size -i -r &quot;[1-4]&quot; tips.csv | csvlook</span>
<span class="s1">$ &lt; tips.csv awk -F, &#39;</span><span class="o">(</span><span class="nv">$1</span> &gt; 40.0<span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nv">$5</span> ~ /S/<span class="o">)</span><span class="s1">&#39; | csvlook</span>
<span class="s1">$ &lt; tips.csv csvsql --query &quot;SELECT * FROM stdin WHERE bill &gt; 40 AND day LIKE &#39;</span>%S%<span class="s1">&#39;&quot; | csvlook</span>

<span class="s1"># merging columns</span>
<span class="s1">$ &lt; names.csv csvsql --query &quot;SELECT id, first_name || &#39;</span> <span class="s1">&#39; || last_name AS full_name, born FROM stdin&quot; | csvlook</span>

<span class="s1"># splitting up Iris data set into three CSV files</span>
<span class="s1">$ &lt; iris.csv fieldsplit -d, -k -F species -p . -s .csv</span>

<span class="s1"># concatenate the files back using cat</span>
<span class="s1">$ cat Iris-setosa.csv &lt;(&lt; Iris-versicolor.csv header -d) &lt;(&lt; Iris-virginica.csv header -d) | sed -n &#39;</span>1p<span class="p">;</span>49,54p<span class="s1">&#39; | csvlook</span>

<span class="s1"># csvjoin cmd allow to join the two data sets</span>
<span class="s1">$ csvjoin -c species iris.csv irismeta.csv | csvcut -c sepal_length,sepal_width,species,usda_id | sed -n &#39;</span>1p<span class="p">;</span>49,54p<span class="err">&#39;</span> <span class="p">|</span> csvloo</code></pre></div>

<h3 id="ch06---managing-your-data-workflow">CH06 - Managing Your Data Workflow</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># drake is command-line tool created by Factual that allows you to:</span>
• Formalize your data workflow steps in terms of input and output dependencies
• Run specific steps of your workflow from the <span class="nb">command </span>line
• Use inline code <span class="o">(</span>e.g., Python and R<span class="o">)</span>
• Store and retrieve data from external sources <span class="o">(</span>e.g., S3 and HDFS<span class="o">)</span>

<span class="nv">$ </span>sudo apt-get install openjdk-6-jdk
<span class="nv">$ </span>sudo apt-get install leiningen
<span class="nv">$ </span>git clone https://github.com/Factual/drake.git
<span class="nv">$ </span><span class="nb">cd </span>drake
<span class="nv">$ </span>lein uberjar
<span class="nv">$ </span>mv drake.jar ~/.bin/
<span class="nv">$ </span><span class="nb">cd</span> ~/.bin/
<span class="nv">$ </span>java -jar drake.jar
<span class="nv">$ </span>git clone https://github.com/flatland/drip.git
<span class="nv">$ </span><span class="nb">cd </span>drip
<span class="nv">$ </span>make <span class="nv">prefix</span><span class="o">=</span>~/.bin install
<span class="nv">$ </span><span class="nb">cd </span>bin
<span class="nv">$ </span>wget https://github.com/jeroenjanssens/data-science-at-the-command-line/blob/master/tools/drake

<span class="c"># top 5 downloaded books of Project Gutenberg</span>
<span class="nv">$ </span>curl -s <span class="s1">&#39;http://www.gutenberg.org/browse/scores/top&#39;</span> <span class="p">|</span> grep -E <span class="s1">&#39;^&lt;li&gt;&#39;</span> <span class="p">|</span> head -n <span class="m">5</span> <span class="p">|</span> sed -E <span class="s2">&quot;s/.*ebooks\/([0-9]+).*/\\1/&quot;</span>

<span class="c"># same step with Drakefile</span>
top-5 &lt;-
        curl -s <span class="s1">&#39;http://www.gutenberg.org/browse/scores/top&#39;</span> <span class="p">|</span>
        grep -E <span class="s1">&#39;^&lt;li&gt;&#39;</span> <span class="p">|</span>
        head -n <span class="m">5</span> <span class="p">|</span>
        sed -E <span class="s2">&quot;s/.*ebooks\/([0-9]+)\&quot;&gt;([^&lt;]+)&lt;.*/\\1,\\2/&quot;</span> &gt; top-5
<span class="nv">$ </span>drake

<span class="c"># add variables to drake 02.drake</span>
<span class="nv">NUM</span><span class="o">=</span>5
<span class="nv">BASE</span><span class="o">=</span>data/

top.html &lt;- <span class="o">[</span>-timecheck<span class="o">]</span>
        curl -s <span class="s1">&#39;http://www.gutenberg.org/browse/scores/top&#39;</span> &gt; <span class="nv">$OUTPUT</span>

top-<span class="nv">$[</span>NUM<span class="o">]</span> &lt;- top.html
        &lt; <span class="nv">$INPUT</span> grep -E <span class="s1">&#39;^&lt;li&gt;&#39;</span> <span class="p">|</span>
        head -n <span class="nv">$[</span>NUM<span class="o">]</span> <span class="p">|</span>
        sed -E <span class="s2">&quot;s/.*ebooks\/([0-9]+)\&quot;&gt;([^&lt;]+)&lt;.*/\\1,\\2/&quot;</span> &gt; <span class="nv">$OUTPUT</span>
<span class="nv">$ </span>drake --debug -w 02.drake
<span class="nv">$ NUM</span><span class="o">=</span><span class="m">10</span> drake -w 02.drake</code></pre></div>

<h3 id="ch07---exploring-data">CH07 - Exploring Data</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># to get the number of unique values for each column</span>
<span class="nv">$ </span>csvstat data/investments2.csv --unique

<span class="c"># csvstat gives a lot of information</span>
<span class="nv">$ </span>csvstat data/datatypes.csv
<span class="nv">$ </span>csvstat data/investments2.csv -c 2,13,19,24</code></pre></div>

<h3 id="ch08---parallel-pipelines">CH08 - Parallel Pipelines</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># looping over files</span>
<span class="nv">$ </span>find data -name <span class="s1">&#39;*.csv&#39;</span> -print0 <span class="p">|</span> parallel -0 <span class="nb">echo</span> <span class="s2">&quot;Processing {}&quot;</span>

<span class="c"># simple parallel processing</span>
<span class="nv">$ </span><span class="k">for</span> i in <span class="o">{</span>1..4<span class="o">}</span><span class="p">;</span> <span class="k">do</span><span class="p">;</span><span class="o">(</span>./slow.sh <span class="nv">$i</span><span class="p">;</span> <span class="nb">echo </span>Processed <span class="nv">$i</span><span class="o">)</span> <span class="p">&amp;;</span><span class="k">done</span>

<span class="c"># parallel - cli tool that allows us to parallelize commands and pipelines</span>
<span class="nv">$ </span>seq <span class="m">5</span> <span class="p">|</span> parallel <span class="s2">&quot;echo {}^2 | bc&quot;</span>
<span class="nv">$ </span>&lt; input.csv parallel -C, <span class="s2">&quot;mv {1} {2}&quot;</span>
<span class="nv">$ </span>&lt; input.csv parallel -C, --header : <span class="s2">&quot;invite {name} {email}&quot;</span>
<span class="nv">$ </span>seq <span class="m">5</span> <span class="p">|</span> parallel -j0 <span class="s2">&quot;echo Hi {}&quot;</span>
<span class="nv">$ </span>seq <span class="m">5</span> <span class="p">|</span> parallel <span class="s2">&quot;echo \&quot;Hi {}\&quot; &gt; data/hi-{}.txt&quot;</span>
<span class="nv">$ </span>seq <span class="m">5</span> <span class="p">|</span> parallel --results data/outdir <span class="s2">&quot;echo Hi {}&quot;</span>
<span class="nv">$ </span>seq <span class="m">100</span> <span class="p">|</span> parallel -C, -k -j100% <span class="s2">&quot;echo &#39;{1}^2&#39; | bc -l&quot;</span><span class="p">|</span>tail

<span class="c"># awscli</span>
pip install awscli
<span class="c"># Getting Your Access Key ID and Secret Access Key</span>
https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSGettingStartedGuide/AWSCredentials.html
aws configure
aws ec2 describe-instances
aws ec2 describe-instances <span class="p">|</span> jq <span class="s1">&#39;.Reservations[].Instances[] | {public_dns: .PublicDnsName, state: .State.Name}&#39;</span>
aws ec2 describe-instances <span class="p">|</span> jq -r <span class="s1">&#39;.Reservations[].Instances[] | select(.State.Name==&quot;running&quot;) | .PublicDnsName&#39;</span> &gt; instances

<span class="c"># running commands on remote machines</span>
<span class="nv">$ </span>parallel --nonall --slf instances hostname
<span class="nv">$ </span>parallel --nonall --slf instances <span class="s2">&quot;sudo apt-get install -y parallel&quot;</span>

<span class="c"># Distributing Local Data Among Remote Machines</span>
<span class="nv">$ </span>seq <span class="m">1000</span> <span class="p">|</span> parallel -N100 --pipe --slf hosts <span class="s2">&quot;(hostname; wc -l) | paste -sd:&quot;</span></code></pre></div>

<h3 id="ch09---modeling-data">CH09 - Modeling Data</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># obtain the two data sets using  curl</span>
<span class="nv">$ </span>parallel <span class="s2">&quot;curl -sL http://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-{}.csv &gt; wine-{}.csv&quot;</span> ::: red white</code></pre></div>


      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          



	<img src="https://jivoi.github.io/images/avatar.jpg" class="bio-photo" alt="EK bio photo">

<h3>EK</h3>
<p>I'm a hacker and security researcher</p>
<a href="mailto:ekoz@protonmail.com" class="author-widgets" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/jivoi" class="author-widgets" target="_blank"><i class="fa fa-fw fa-tw-square"></i> Twitter</a>





<a href="http://github.com/jivoi" class="author-widgets" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>










        </div>
        <p class="byline"><strong>Data Science at the Command Line</strong> was published on <time datetime="2015-07-10T00:00:00+03:00">July 10, 2015</time> and last modified on <time datetime="2015-07-10">July 10, 2015</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="https://jivoi.github.io/archive/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="https://jivoi.github.io/2015/07/07/playing-with-devstack/" title="Playing with DevStack">Playing with DevStack</a></li>
    
      <li><a href="https://jivoi.github.io/2015/07/04/otkrytyie-bazy-dannykh-rf/" title="Открытые базы данных РФ">Открытые базы данных РФ</a></li>
    
      <li><a href="https://jivoi.github.io/2015/07/03/playing-with-sysdig/" title="Playing with Sysdig">Playing with Sysdig</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://jivoi.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://jivoi.github.io/assets/js/scripts.min.js"></script>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=2435245; 
var sc_invisible=1; 
var sc_security="015e0a49"; 
</script>
<script type="text/javascript" src="http://www.statcounter.com/counter/counter.js"></script>
<noscript><div class="statcounter"><a title="free hitcounter" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="http://c.statcounter.com/2435245/0/015e0a49/1/" alt="free hit counter"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-64125092-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'httpjivoigithubcom'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


	        

</body>
</html>
