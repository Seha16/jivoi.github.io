---
layout: post
title: "Ответы с олимпиады для системных администраторов от Yandex"
modified: 2014-06-18 16:39:24 +0300
category: [howto]
tags: [linux, sysadm, yandex]
image:
  feature:
  credit:
  creditlink:
comments: True
share:
---
Ответы с олимпиады для системных администраторов от Yandex.
Много интересных вопросов.

## Ответы на вопросы первой игры первого тура:

#### Вопрос 1.
С помощью каких комбинаций клавиш в текстовых редакторах vi или vim скопировать в буфер 4 строки, начиная со строки, где находится курсор?

#### Ответ:  
Способов много,  навскидку можно ответить, что это можно сделать с помощью:  4yy, либо y4y, либо 4ddkp, либо v курсор y, либо 4+Shift+y

#### Вопрос  2.
Вы в bash запустили команду echo $[5/2]. Какой будет результат?

#### Ответ:  
ну тут все просто, ответ  2

#### Вопрос 3.
В bash вы хотите сравнить два числа.  Какой оператор сравнения нужно применить, если нужно узнать,  что первое значение больше или равно второму?

#### Ответ:   
Обычно применяют  -ge

#### Вопрос 4.
Вам нужно запустить web-сервер Apache на порту 3128. С помощью  какой директивы в конфигурационном файле это можно сделать?

#### Ответ:  
Listen  или Port

#### Вопрос 5.
Как в Linux узнать текущий рабочий каталог процесса с pid = 4556?

#### Ответ:  
Его можно найти в файлике /proc/4556/cwd   

#### Вопрос 6.
Как в Unix посмотреть какие файлы или устройства  использует процесс с pid = 85003?  
Вообще этот вопрос вызвал много споров.

#### Ответ:
Мы принимали следующие ответы:
Для Linux: никак или в ответе должно было быть упоминание, что это можно сделать с помощью дополнительной настройки ядра, например, sysctl -w kernel.pid_max = (число > 85003). По умолчанию значение переменной kernel.pid_max = 32768;
Для FreeBSD: fstat -p 85003 или установить lsof, а потом посмотреть с помощью lsof -p 85003. Утилиты lsof и procfs по умолчанию не установлены;
Для Solaris мы принимали ответ, что можно сделать с помощью утилиты pfiles.

#### Вопрос 7.
Какие из перечисленных типов хранилищ в MySQL  поддерживают транзакционность:  MyISAM, Memory, InnoDB, Archive, NDB, CSV? 

#### Ответ:  
Ну тут, конечно, все вспомнили InnoDB, но и NDB тоже поддерживает транзакции.

#### Вопрос 8.
Как в PostgreSQL очистить файлы баз данных от уже удалённых записей?

#### Ответ:   
Вот уже много лет,  любимой командой администраторов PostgreSQL  является VACUUM FULL. 

#### Вопрос 9.
Как очистить лог-файл /var/log/log, открытый  работающим процессом?

#### Ответ:  
Тут как и в пером вопросе тоже сразу можно привести массу вариантов:  $echo –n > /var/log/log  или $ > /var/log/log или $ cat /dev/null > /var/log/log .   

#### Вопрос 10.
Вы зашли на сервер с Linux с помощью ssh. Как перегрузить этот сервер по sysrq-b?

#### Ответ:  
вот такой командой - $ echo b > /proc/sysrq-trigger   

#### Вопрос 11.
Как подсчитать количество строк в текстовом файле file.txt?

#### Ответ:   
Ну тут тоже самый привычный и распространенный сценарий у васех администраторов - $wc -l file.txt  .

#### Вопрос 12.
Как найти подстроку  в файле, сжатом с помощью gzip?

#### Ответ:   
Тоже вот прям сходу пара вариантов:  $zgrep  stroka  file или $zcat  file | grep stroka 

#### Вопрос 13.
Какой утилитой в Linux можно проверить состояние и включить/выключить кеширование на запись для SAS/SATA устройства (диска)?

#### Ответ:   
hdparm в случае SATA или  sdparm  в случае SAS/SATA. 

#### Вопрос 14.
Как посмотреть версию и возможные параметры модуля e1000e для загруженного в настоящий момент ядра в Linux?

#### Ответ:  
modinfo e1000e   

#### Вопрос 15.
Как в командной строке bash повторить команду, которую вы набирали ранее?

#### Ответ:  
Тоже навскидку 3 варианта: Ctrl+r или !- или курсорные клавиши   

#### Вопрос 16.
Какой командой в Linux можно разрешить dump corefile-ов в текущей сессии без ограничения по размеру?

#### Ответ:  
ulimit -c unlimited   

#### Вопрос 17.
Как записать 100 пакетов на интерфейсе eth0 в файл mytrace.raw, не ограничивая длину захваченного (captured) пакета?

#### Ответ:  
tcpdump -i eth0 -c 100 -s 0 -w mytrace.raw   

#### Вопрос 18.
Как изменить процент зарезервированного для root-а места на файловой системе ext3 до 2%, смонтированной в /filesystem в Linux?

#### Ответ:   
tune2fs -m2 /filesystem   

#### Вопрос 19.
Как в Linux смонтировать файловую систему tmpfs размеров 2Гб в /tmpfs?

#### Ответ:   
mount none /tmpfs -t tmpfs -o size=2g  

#### Вопрос 20.
Как посмотреть таблицы NAT в «файрволе» на сервере с Linux (ядро 2.6.X)?

#### Ответ:
iptables -L -t nat   

#### Вопрос 21.
Какой утилитой в Linux можно посмотреть, какие системные вызовы делает работающий процесс?

#### Ответ:
Любимой утилитой всех системных администраторов - strace   

#### Вопрос 22.
Как посмотреть процессы пользователя vasya, отсортировав их по resident size в порядке убывания?

#### Ответ:
Вообще вариантов ответа очень много, но вот, например один из них: ps nu -U vasya --sort -rss   

#### Вопрос 23.
Как смонтировать каталог /var/log/mydaemon в /mydaemon?

#### Ответ:
mount /var/log/mydaemon /mydaemon -o bind   

#### Вопрос 24.
Какое максимальное число адресов можно использовать в ipv4 сети /26?

#### Ответ:
Ответ 62, потому что 2 адреса из 64: Широковещательный адрес и Адрес сети – являются служебными.

#### Вопрос 25.
Как затереть нулями первые 64Мб диска /dev/sda?

#### Ответ:
dd if=/dev/zero of=/dev/sda bs=64M count=1 или dd if=/dev/zero of=/dev/sda bs=1M count=64

#### Вопрос 26.
Какова последовательность пакетов tcp при установке соединения (укажите типы пакетов)?
 
#### Ответ: 
хост A посылает хосту B пакет с установленным битом SYN и 32-битным значением ISSa в поле Sequence Number
хост B отвечает хосту A пакетом с установленными битами SYN и ACK, 32-битным значением ISSb в поле Sequence Number, и значением (ISSa+1) в поле ACK
хост A отвечает хосту B пакетом с установленным битом ACK, значением (ISSa+1) в поле Sequence Number, и значением (ISSb+1) в поле ACK.

#### Вопрос 27.
Какой параметр ядра отвечает за максимальный размер памяти, доступный для выделения процессам в Linux? 

#### Ответ:
vm.overcommit_ratio   

#### Вопрос 28.
Как в Linux сделать так, чтобы core-файлы сохранялись c именем /var/tmp/core.{pid}? 

#### Ответ:
sysctl -w kernel.core_pattern="/var/tmp/core.%p"   

#### Вопрос 29.
Как одной командой «сбросить» все переменные окружения (сделать «пустое» окружение) в текущей сессии в Linux?

#### Ответ:  
env -i     

#### Вопрос 30.
Как включить jumbo-frames на сетевом интерфейсе eth0?

#### Ответ:
ifconfig eth0 mtu 9000

## Ответы на вопросы второй игры первого тура:

#### Вопрос 1.
Напишите чему будет равен mss, если Вы используете IPv6 и mtu=1450?

#### Ответ:  
1390, при использовании TCP поверх IPv6, MSS должно быть вычислено как максимальная длина пакета минус 60 октетов, так как минимальная длина заголовка IPv6 (т.e., IPv6 заголовок без заголовков расширения) на 20 октетов больше, чем для IPv4.

#### Вопрос 2.
Что в bash напечатает команда echo $((5/2))?

#### Ответ: 
Как ни странно, но ответ такой же, как и в первой игре – 2 

#### Вопрос 3. 
Приведите пример команды, которая напечатает 'Y' , если файл/var/tmp/core существует и он ненулевого размера (используя средства bash и coreutils)?

#### Ответ: 
Например, можно сделать это  вот таким способом  $test -s /var/tmp/core && echo 'Y' или вот таким $ [ -s /var/tmp/core ] && echo 'Y'

#### Вопрос 4. 
С помощью какой директивы в Apache 1.3 можно указать e-mail для связи на стандартной страничке Internal Server Error?

#### Ответ:   
ServerAdmin

#### Вопрос 5. 
Как в Linux вывести все переменные окружения, с которыми работает процесс с pid = 5671, в виде списка, где каждая переменная на отдельной строке?

#### Ответ:   
На этот  вопрос в шаблоне для проверки забито очень много разных вариантов,  вот парочка из них:  $/proc/5671/environ | strings или $sudo cat /proc/2236/environ | sed 's/\x00/\n/g'

#### Вопрос 6. 
Как в Linux или FreeBSD открыть tcp порт 74022 в режиме Listen при помощи утилиты пакета netcat?

#### Ответ: 
никак нельзя посмотреть, так как такого порта не может быть.  В протоколе TCP поле "Порт назначения" (DESTINATION PORT) занимает 2 байта, поэтому номер порта не может превышать два в шестнадцатой степени.

#### Вопрос 7. 
Как в MySQL посмотреть список текущих сессий?

#### Ответ:  
show processlist в консоли mysql или спецальной утилитой mysqladmin с ключиком processlist,  вообщем ключевое слово – processlist.

#### Вопрос 8. 
Как в PostgreSQL посмотреть список текущих сессий?

#### Ответ:  
Тут нужно делать специальный запрос  в базе:  SELECT * from pg_stat_activity. Или так: $ps axu | grep postgre

#### Вопрос 9. 
У Вас на сервере есть древовидная структура директорий с несколькими миллионами файлов. Напишите пример команды, которая удалит все файлы, не трогая структуру каталогов?

#### Ответ:  
Это  один из наших любимых вопросов на собеседованиях   Конечно же, это легко делается с помощью команды find.

#### Вопрос 10. 
Как не перезагружая операционную систему Linux (ядро 2.6.X), разрешить автоматическую перезагрузку через 10 секунд после того, как произошел kernel panic?

#### Ответ:  
$sysctl -w kernel.panic=10 или $echo 10 > /proc/sys/kernel/panic

#### Вопрос 11. 
Напишите пример команд из coreutils, при помощи которых можно разбить содержимое текстового файла на три примерно равных части и поместить их в три разных файла?

#### Ответ:   
Ну тут опять очень много вариантов, но это точно можно сделать с помощью команд split, dd,  tail или head.  

#### Вопрос 12. 
Как посмотреть в содержимое initrd, собранного mkinitramfs?

#### Ответ:  
$zcat |cpio -i --make-directories или разархивировать с помощью команды gunzip, а потом  сказать $mount -o loop initrd.img /mnt/initrd

#### Вопрос 13. 
Какой утилитой в Linux посмотреть время наработки диска в часах?

#### Ответ:  
Например, это можно сделать с помощью smartctl или sg_utils.

#### Вопрос 14. 
Как в Linux (2.6.X) безопасно выгрузить модуль ядра e1000e?

#### Ответ:  
С помощью команды $modprobe -r e1000e 

#### Вопрос 15. 
Как в терминале bash при помощи одной служебной комбинации клавиш слово dpgk превратить в dpkg, если курсор стоит на букве k?

#### Ответ:  
Эта комбинация клавиш -  ctrl-T

#### Вопрос 16. 
Как в Linux посмотреть лимиты на количество открытых файлов, действующие в текущей сессии?

#### Ответ:  
Раз надо посмотреть лимиты, то  логично это делать с помощью команды ulimit -n или ulimit –a

#### Вопрос 17. 
Какими командами можно узнать mac-адрес сервера, доступа к которому у Вас нет, и он находится вашем сегменте ethernet сети? При этом известен его ip и до этого момента обмена ip-пакетами с этим сервером не было.

#### Ответ:   
Для начала надо с ним обменяться пакетами. Например, это можно сделать с помощью команды ping, ну а потом можно посмотреть его mac  в arp таблице с помощью команды arp. 

#### Вопрос 18. 
Какой командой в Linux посмотреть размер журнала файловой системы ext3, смонтированной в /dev/sda1?

#### Ответ:  
dumpe2fs -h /dev/sda1 

#### Вопрос 19. 
Как в Linux изменить размер файловой системы tmpfs, смонтированной в /tmpfs с 2 до 4 гигабайт, без потери ее содержимого?

#### Ответ:  
mount /tmpfs -o remount, size=4g

#### Вопрос 20. 
Как в Linux (ядро 2.6.X) одной командой посмотреть содержимое всех таблиц в firewall?

#### Ответ: 
Это можно сделать командой iptables-save

#### Вопрос 21. 
Какой командой посмотреть, какие из необходимых программе библиотек недоступны при ее запуске?

#### Ответ:  
С помощью любимой команды системных администраторов - strace или можно использовать ldd или gdb.

#### Вопрос 22. 
Как посмотреть «дерево» процессов?

#### Ответ:  
Тут тоже сразу можно привести несколько вариантов: pstree или ps ax --forest или ps axf или ps ax -H

#### Вопрос 23. 
Как в Linux прочитать файл /serial.txt, находящейся в ISO9660-образе winxpsp4.iso?

#### Ответ: 
По ощущениям вопрос всем очень понравился, запоминайте ответ!  mount -o loop -t iso9660 winxpsp4.iso /mnt;; cat /mnt/serial.txt

#### Вопрос 24. 
Что неправильно в параметрах конфигурации интерфейса: 
address 192.168.1.191 
netmask 255.255.255.192 
network 192.168.1.128 
gateway 192.168.1.129 
mtu 1450 ?

#### Ответ:  
Адрес хоста (address) совпадает с адресом бродкаста (broadcast) сегмента сети.

#### Вопрос 25. 
Как скопировать данные с поврежденного диска /dev/sda на целый /dev/sdb, пропустив только сбойные сектора?

#### Ответ:
Классический вариант - dd if=/dev/sda of=/dev/sdb conv=sync,noerror.
Параметр "conv=sync,noerror" указывает dd не читать блок, если при этом происходит ошибка, но записать в архивируемый файл-образ данные (недостающие входные данные будут заменены нулевыми байтами).
Еще есть  утилиты dd_rescue и ddrescue,  с помощью которых тоже можно решить задачу.

#### Вопрос 26.
Какой флаг должен быть установлен в tcp пакете, чтобы соединение было немедленно прекращено?

#### Ответ: 
RST

#### Вопрос 27. 
Как в Linux запретить выделение более 90% физической памяти процессам, при условии, что swap выключен?

#### Ответ: 
канонический ответ согласно документации:
$sysctl -w vm.overcommit_memory=2; sysctl -w vm.overcommit_ratio=90 или 
$echo 2 > /proc/sys/vm/overcommit_memory; echo 90 > /proc/sys/vm/overcommit_ratio

#### Вопрос 28. 
Как в Linux разрешить маршрутизацию ipv4 пакетов?

#### Ответ:  
sysctl -w net.ipv4.ip_forward=1 или echo 1 > /proc/sys/net/ipv4/ip_forward

#### Вопрос 29. 
Есть файл file со строками: 
1 
10 
45 
6 
1 
5 
7 
10 
Как при помощи утилит, входящих в coreutils, узнать какие строки присутствуют в файле более 1 раза, и сколько раз повторяется каждая строка?

#### Ответ: 
cat file|sort|uniq -dc

#### Вопрос 30. 
Вы зашли на сервер example.com и запустили там команду wget http://example.com Как посмотреть траффик этого соединения с помощью команды tcpdump?

#### Ответ: 
tcpdump -i lo или -i any
Для общения  между сетевым клиентским программным обеспечением и серверным приложением, расположенном на том же компьютере используется интерфейс loopback.

## Ответы на вопросы второго тура:

#### Вопрос 1.
Есть сервер, на котором сконфигурированы интерфейсы  
eth0 - ip 1.2.3.4, netmask /25, gateway 1.2.3.1 

и
eth1 - ip 5.6.7.8, netmask /25, gateway 5.6.7.1. 
Есть клиенты, которые работают с этим сервером,  и они находятся за пределами описанных выше сетей. Вам необходимо, что бы ответы на запросы отправлялись  через тот же интерфейс, через который они были получены.
Напишите последовательность команд, которая позволяет это сделать. Для решения задачи используйте статическую маршрутизацию.

#### Ответ: 
ip rule add from 1.2.3.4 lookup 200 priority 200 
ip route add default via 1.2.3.1 dev eth0 src 1.2.3.4 table 200 
ip route add default via 5.6.7.1 

#### Вопрос 2.
Как в командном режиме vi или vim в текстовом файле заменить в каждой строке файла первые сочетания цифр, которые начинаются с  цифры 3, а заканчиваются на цифру 6 (между тройкой и шестеркой могут быть одна или две любых цифры), на подстроку 444? 

#### Ответ:
:%s/3[0-9]\{1,2}6/444/  или  :%s/3\d\d?6/444/

#### Вопрос 3. 
На сервере c помощью mdadm собран программный raid 10 на четырех дисках со следующим параметрами:
near=2
far=1
Нумерация дисков начинается с нуля. 
Какое максимальное количество дисков можно одновременно вынуть из raid-массива не нарушая его работоспособность?
Напишите номер или номера этих дисков.

#### Ответ:
2 штуки;  0 и 2 или 1 и 3   

#### Вопрос 4.
Задачи, работающие на Вашем сервере,  требуют большого количества вычислительных мощностей.  Вы подозреваете, что governor может необоснованно занижать частоту процессоров. Напишите команды, которыми можно заставить процессоры работать всегда на максимальной частоте, не перегружая сервер и не устанавливая дополнительных утилит.

#### Ответ:
$echo userspace >/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
$cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq >/sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed

#### Вопрос 5.
У вас есть сервер с операционной системой Linux.  Памяти на этом сервере 1 гигабайт.  Там работает процесс, у которого сегмент кода  занимает 500 мегабайт, столько же занимает сегмент данных. Запускаем второй такой же процесс. 

Мы промаркировали страницы памяти по типам:

1. - код первого процесса;
2. - данные первого процесса;
3. - код второго процесса;
4. - данные второго процесса.
Напишите все номера типов страниц,  которые могут оказаться в swap.

#### Ответ:
2 и 4 
В swap не попадают страницы с маппингом сегмента кода, так как они всегда могут быть перечитаны с диска.

#### Вопрос 6.
Есть сервер про который известно,  что на нем есть SATA диск с файловой системой ext3, 32 гигабайта памяти, нет swap и включить его нельзя. Вы запускаете параллельно команды 
dd if=/dev/zero of=/opt/testfiles/tesfile1 bs=1G count=64
и 
dd if=/dev/zero of=/opt/testfiles/tesfile2 bs=1G count=64.
Через несколько минут сервер уходит в iowait, команды в консоли очень медленно работают, еще через несколько минут сервер падает с OOM в kernel panic. 
Если Вы запускаете 
dd if=/dev/zero of=/opt/testfiles/tesfile1 bs=1G count=18
и
dd if=/dev/zero of=/opt/testfiles/tesfile2 bs=1G count=18
то описанного эффекта не наступает. 
Как можно бороться с описанной проблемой,  не ограничивая дисковую активность на сервере и не изменяя его аппаратных характеристик?

#### Ответ:
Выключить кэш на запись: 
$sysctl -w vm.dirty_ratio = 0 
или перемонтировать файловую систему в sync: 
$mount -o remount,sync /mountpoint

#### Вопрос 7.
У Вас есть два сервера S и R.
На S (IP = 192.168.1.2) на 80 порту запущен сайт, и он недоступен из внешней сети. 
R используется в качестве шлюза по умолчанию для сервера S и доступен из внешней сети по адресу 1.2.3.4. 
Чтобы обеспечить доступ к сайту из внешней сети,  на R настроен DNAT: 
1.2.3.4:80->192.168.1.2:80
Вы проверяете работу этой схемы, находясь на сервере S, командой telnet 1.2.3.4 80.
Почему у Вас не получилось установить соединение?

#### Ответ:
Ключевые слова в ответе на этот вопрос: martian packets или марсианские пакеты - пакеты с неизвестным маршрутом к источнику. Получение таких пакетов не ожидается системой Linux, особенно учитывая то, откуда они прибыли (например, пакеты, получаемые от внутренней машины, но приходящие на внешний интерфейс).   

#### Вопрос 8.
На сервере c помощью mdadm был собран программный raid 0 на четырех дисках.  В какой-то момент в серверной проходила уборщица,  и неожиданно у сервера исчезло питание. Когда сервер включили, выяснилось, что  рейд полностью развалился (mdadm не видит суперблоков). 
Каким образом можно восстановить данные (собрать рейд) на этой машине? Приведите пример команды.

#### Ответ:
Необходимо пересоздать массив, и поскольку это stripe, и ресинхронизации делаться при создании не будет, данные с большой вероятностью удастся оттуда достать.  

#### Вопрос 9.
Внезапно на web сервере с Linux выросла нагрузка. Вы зашли на него и обнаружили, что из 1000 соединений 990 приходит с адреса ipv6 ::ffff:1.2.3.4.  Вы подозреваете, что это DOS-атака, и хотите заблокировать соединения с этого адреса. Какой командой Вы это сделаете?

#### Ответ:
iptables -A INPUT -s 1.2.3.4 -j REJECT 

#### Вопрос 10.
На 1.2.3.4: 443 отвечают 3 сайта: 
forbar.tj, 
foo.ec и 
bar.ag 
по протоколу https.
Сколько должно быть сертификатов для этих web сайтов, и что должно в них быть прописано согласно RFC, чтобы браузеры могли им доверять?

#### Ответ:
сертификат должен быть один;
все три хоста должны быть описаны в X509v3 Subject Alternative Name   

#### Вопрос 11.
На сервере запустили форк-бомбу.  У Вас есть открытая ssh-сессия на машину. Серверу в настоящий момент настолько плохо,  что нельзя даже запустить ps, так как закончились pid-ы.  Родительский и дочерние процессы форк-бомбы называются someprogram.bin
Каким образом можно убить все процессы someprogram.bin?

#### Ответ:
exec busybox/python, откуда в цикле убить все процессы не порождая новых процессов.   

#### Вопрос 12.
Приведите пример команды, которая позволяет настроить  в Linux маршрутизацию пакетов с source-address  192.168.1.1/24 в сеть 192.168.2.0/24 через маршрутизаторы 192.168.1.128 и 192.168.1.253 таким образом, чтобы в случае недоступности первого использовался второй маршрутизатор (автоматически).

#### Ответ:
ip route add 192.168.2.0/24 src 192.168.1.1 nexthop via 192.168.1.128 dev eth0 weight 1 nexthop via 192.168.1.253 dev eth0 weight 2 или использовать метрики 

#### Вопрос 13.
В какой пропорции разложится входящая нагрузка в etherchannel, собранный из 2 портов с алгоритмом хеширования по MAC-адресам,  если входящий трафик генерируется нечетным количеством машин (N).

#### Ответ:
((N-1)/2)+1:(N-1)/2 или (n-1)/(n+1)   

#### Вопрос 14.
У Вас на сервере запущено приложение, которое хранит все данные в одном файле /var/spool/veryimportantinformation.dat
Вы случайно удалили этот файл, попытались найти резервную копию, но не нашли ее. Приложение все еще работает. Как восстановить этот файл?

#### Ответ:
Нужно узнать $PID приложения и поискать содержимое удаленного файла в /proc/$PID/fd/.

#### Вопрос 15.
У Вас в зоне foobar.tj есть следующие записи:
a IN A 1.2.3.4
b CNAME a
MX 10 mail.foo.ec
g IN A 1.2.3.2
* IN CNAME b
Надо ли что-то надо изменить в зоне, чтобы можно было принимать почту для z.foobar.tj на сервер mail.foo.ec?

#### Ответ:
В зоне допущена ошибка, и при попытке загрузить ее в самом распространенном DNS сервере Bind 9, вы увидите сообщение:
dns_master_load: /etc/bind/foobar.tj:3: b.foobar.tj: CNAME and other data
И зона банально не загрузится.
Соответственно, эту ошибку тоже придется исправить. Например, явно прописав:
b IN A 1.2.3.4
MX 10 mail.foo.ec.
Ну и дописав явно запись:
z MX 10 mail.foo.ec.
Не забывая, конечно, ставить точки, иначе почта будет пытаться уйти на хост mail.foo.ec.foobar.tj.

## Вопросы и ответы ФИНАЛА:
 
#### Вопрос 1.
Укажите размер обычных и больших страниц памяти в Linux x86/x86_64 (по умолчанию, ответ в кб)?

#### Ответ: 
4кб, 2048кб 

#### Вопрос 2.
Вам достался в наследство сервер от администратора, который любил фильм «Матрица», и каждый раз, когда вы заходите на него, система приветствует вас сообщением:
Linux yandex-games #ya1 SMP Mon Sep 20 5:43:25 MSD 2010 x86_64 GNU/Linux

The Matrix is a system, Neo. That system is our enemy. But when youre inside, you look around, what do you see? Businessmen, teachers, lawyers, carpenters. The very minds of the people we are trying to save. But until we do, these people are still a part of that system, and that makes them our enemy. You have to understand, most of these people are not ready to be unplugged. And many of them are so inured, so hopelessly dependent 
on the system, that they will fight to protect it.

root@yandex:#
Вам же больше нравятся цитаты из фильма «Сеть», и Вы хотите заменить приветствие. Напишите все возможные варианты из перечисленных ниже, где вы будете искать цитату Морфеуса:

1./etc/issue
2./etc/motd
3./etc/debconf.conf
4./etc/pam.d/login
5./etc/adduser.conf
6./etc/hostname
7./etc/environment

#### Ответ: 
1, 2, 4 

#### Вопрос 3.
Ваш пакет приходит на порт веб-сервера, работающего под управлением ОС linux.
В каком порядке по цепочкам таблиц iptables проследует этот пакет?
В качестве ответа принимаются варианты из нескольких пунктов в порядке возрастания (например: 1,2,5,10).

1. nat PREROUTING
2. mangle PREROUTING
3. filter INPUT
4. mangle INPUT
5. filter FORWARD
6. mangle FORWARD
7. filter OUTPUT
8. mangle OUTPUT
9. nat OUTPUT
10. nat POSTROUTING
11. mangle POSTROUTING

#### Ответ: 
1,2,3,4 

#### Вопрос 4.
Вы хотите, чтобы ваш сервер не «пинговался», но продолжал принимать и отвечать на все остальные icmp сообщения.
Какой (или какими) командами iptables из списка можно это сделать? Перечислите все варианты.

1. iptables -I OUTPUT -p icmp --icmp-type timestamp-reply -j DROP
2. iptables -I OUTPUT -p icmp --icmp-type echo-reply -j DROP
3. iptables -I INPUT -p icmp --icmp-type precedence-cutoff -j DROP
4. iptables -I INPUT -p icmp --icmp-type echo-request -j DROP
5. iptables -I INPUT -p icmp --icmp-type timestamp-request -j DROP
6. iptables -I INPUT -p icmp --icmp-type echo-reply -j DROP
7. правильные ответы отсутствуют

#### Ответ: 
2, 4 

#### Вопрос 5.
Ваш пакет проходит через роутер под управлением ОС Linux. 
В каком порядке данный пакет проходит по цепочкам таблиц iptables?
В качестве ответа принимаются варианты из нескольких пунктов 
в правильном порядке (например 1,2,3,4).

1. nat PREROUTING
2. mangle PREROUTING
3, filter INPUT
4. mangle INPUT
5. filter FORWARD
6. mangle FORWARD
7. filter OUTPUT
8. mangle OUTPUT
9. nat OUTPUT
10. nat POSTROUTING
11. mangle POSTROUTING

#### Ответ: 
1,2,5,6,11,10 

#### Вопрос 6.
Напишите тип DNS-записи, которая связывает имя хоста с адресом протокола IPv6 в файле зоны.

#### Ответ: 
AAAA 

#### Вопрос 7.
Какие в ядре Linux существуют аллокаторы памяти?
Выберите все варианты:

1. SLAB
2. SLOPE
3. SLEEP
5. SLOB
6. SLIP
7. SLEB
8. SLUB
9. SLURM

#### Ответ: 
1,5,8 

#### Вопрос 8.
C помощью какого драйвера/дисциплины можно шейпить входящий на интерфейс машины трафик?

1. htb
2. sfq
3. ifb
4. hfsc
5. tfb
6. imq

#### Ответ: 
3, 6 

#### Вопрос 9.
Можно ли передать управление компьютером на другой компьютер с помощью Transfer Control Protocol ((да/нет)?
 
#### Ответ: 
да 

#### Вопрос 10.
Какая из нижеперечисленных баз данных не является реляционной?

1. PostgreSQL
2. SqlLite
3. Bdb
4. MySQL
5. Oracle
6. MongoDb
7. Drizzle
8. CouchDB

#### Ответ: 
3, 6, 8

#### Вопрос 11.
Вы установили на сервер свой любимый шелл tcsh в каталог /usr/bin/.
При запуске команды chsh -s /usr/bin/tcsh Вам сообщили:
tcsh is an invalid shell.
Куда надо прописать строчку /usr/bin/tcsh, 
чтобы вы и другие пользователи имели возможность 
менять себе shell с помощью команды chsh?

#### Ответ:/etc/shells 

#### Вопрос 12.
Какое минимальное количество нажатий комбинации клавиш Ctrl-T в bash превратит слово СИСЯРО в слово РОССИЯ?

#### Ответ: 
9 

#### Вопрос 13.
Какая директива в конфигурационном файле зоны test.ru отвечает за допустимое время хранения зоны в кэшах неответственных DNS-серверов?

#### Ответ: 
ttl

#### Вопрос 14.
Какая cli-команда используется для управления LVS?

#### Ответ:
ipvsadm

#### Вопрос 15.
Какая cli-утилита в Linux используется для настройки traffic shaping c classful queuing disciplines?
 
#### Ответ: 
tc

#### Вопрос 16.
Где в /proc посмотреть параметры, c которыми было загружено ядро Linux?

#### Ответ: 
cmdline

#### Вопрос 17.
Как зовут любимого пингвина Линуса? 

#### Ответ: 
Tux Такс Тукс - мы принимали любой ответ на этот вопрос 

#### Вопрос 18.
На значение какого параметра в 32-битных системах, показывающегося в /proc/meminfo, влияют настройки overcommit?

#### Ответ: 
CommitLimit

#### Вопрос 19.
Есть зона yandex.ru в ней есть запись:
@ IN SOA ns1.yandex.ru. sysadmin.yandex-team.ru. (
2010111900 ;
1800 ;
900 ;
2592000 ;
900 ) ;

Случилась неприятность, вторичный сервер, обслуживающий один из наших ДЦ, не может соединиться с первичным.
Напишите время в минутах, через которое данные зоны на вторичном сервере устареют и будут считаться недействительными.

#### Ответ: 
43200 

#### Вопрос 20.
Какими из перечисленных ниже команд можно проверить, открыт ли tcp-порт на удаленном компьютере 
(напишите номера правильных ответов):

1. curl
2. nc
3. cm
4. nm
5. nmap
6. rsync
7. telnet
8. lsof

#### Ответ:
1, 2, 5, 6, 7

#### Вопрос 21.
Как в Linux называется тип памяти, в котором размещаются данные, не ассоциированные ни с каким файлом на файловой системе?

#### Ответ: 
AnonPages/anonymous pages/анонимные страницы

#### Вопрос 22.
«90x60x90 – это?»

#### Ответ: 
486000, но вообще и на этот вопрос мы принимали любой ответ, но наши участники оказались серьезными людьми и честно перемножили эти цифры 

#### Вопрос 23.
Как «сбросить» страничный кеш в Linux (и только его)?

#### Ответ: 
echo 1 > /proc/sys/vm/drop_caches или sysctl -w vm.drop_caches=1

#### Вопрос 24.
Есть зона yandex.ru в ней есть запись:
@ IN SOA ns1.yandex.ru. sysadmin.yandex-team.ru. (
2010111900 ;
1800 ;
900 ;
2592000 ;
900 ) ;
Напишите, с какой частотой (в минутах) вторичному DNS-серверу ns2.yandex.ru следует проверять актуальность информации для зоны yandex.ru.

#### Ответ:
30 

#### Вопрос 25.
Каким должно быть значение переменной ${value} в команде echo ${value} > /proc/sysrq-trigger, если Вы хотите послать сигнал 15 все процессам в Linux, кроме init?

#### Ответ: 
e 

#### Вопрос 26.
Вы выполнили следующую команду:
rsync -avH sourcehost::sourceshare/filename desthost::destshare
Какие характеристики файлов при этом скопировались:

1. владелец;
2. права доступа;
3. время создания
4. никакие
5. владелец и права доступа;
6. права доступа и время создания;
7. владелец, права доступа и время создания;

#### Ответ: 
7 

#### Вопрос 27.
Что едят пингвины?

#### Ответ: 
планктон, рыбу и головоногих моллюсков и еще много чего еще 

#### Вопрос 28.
В выводе ps Вы видите процесс
19355 pts/12 T 0:00 someprogram.bin
Какой сигнал (укажите буквенное именование сигнала) необходимо послать для того, чтобы someprogram.bin продолжил исполняться?

#### Ответ: 
CONT 

#### Вопрос 29.
Вы хотите, чтобы в текущей сессии bash все файлы создавались с правами u=rw,g=w,o=w.
Какую встроенную команду bash надо использовать и с какими параметрами?

#### Ответ: 
umask 0155 

#### Вопрос 30.
Напишите одну команду с аргументами, с помощью которой в Linux можно создать символьное устройство
mydev (minor/major 5/1) c правами u=rw,g=r,o=r

#### Ответ: 
mknod -m644 mydev c 1 5 

#### Вопрос 31.
Сколько трехюнитовых серверов можно разместить в 39-юнитовой стойке при условии, что 12 и 13 юниты заняты свитчами (счет с единицы)?

#### Ответ: 
11

#### Вопрос 32.
Какой протокол транспортного уровня модели OSI/ISO используется для AXFR-запросов в DNS?

#### Ответ: 
tcp

#### Вопрос 33.
Про что вы думаете, если видите красного черта?
 
#### Ответ: 
Вообще про FreeBSD, но чем черт не шутит? 

#### Вопрос 34.
Сколько адресов содержит сеть /17 (включая все зарезервированные)?

#### Ответ: 
32768 

#### Вопрос 35.
Какой командой можно запретить всем пользователям (включая root) удалить файл с файловой системы ext3 при условии, что в системе выключены дополнительные системы контроля доступа (selinux, apparmor, etc.)?

#### Ответ: 
chattr

#### Вопрос 36.
Какие из перечисленных ниже вариантов значения TTL нужно написать в зоне test.ru, если у вас есть задача отдавать новые данные по всему миру максимум через 3 часа после обновления зоны:

1. 3H
2. 180m
3. 10800
4. 1080p
5. 10800s

#### Ответ: 
1,2,3,5

#### Вопрос 37.
Вы в Linux выполнили в bash команду 
«grep processor /proc/cpuinfo | sort | tail -1 | cut -f2 -d:»
на шестнадцатиядерном компьютере. Какую строку Вы получили?

#### Ответ: 
9 

#### Вопрос 38.
Какой код ответа HTTP требует, чтобы пользователь заплатил деньги?

#### Ответ: 
402 

#### Вопрос 39.
Напишите номер уровня модели OSI/ISO, c протоколом которого работает команда arp?

#### Ответ: 
2

#### Вопрос 40.
Какая из перечисленных ниже строчек файла syslog.conf позволяет записывать в текстовый лог-файл все критические события от ядра:

1. auth,authpriv.* /var/log/auth.log
2. *;auth,authpriv.none -/var/log/syslog
3. cron.* /var/log/cron.log
4. daemon.* -/var/log/daemon.log
5. kern.* -/var/log/kern.log
6. lpr.* -/var/log/lpr.log
7. mail.* -/var/log/mail.log
8. user.* -/var/log/user.log
9. kern.crit root, vasya
10. kern.crit @vasya
11. *.crit /var/log/crit/log
12. *.crit /dev/console

#### Ответ: 
5,11

#### Вопрос 41.
Какие права будут у файла (напишите восьмеричное представление), если Вы его создали командой umask 0156; touch myfile?
 
#### Ответ: 
620

#### Вопрос 42.
Что едят красные черти?

#### Ответ: 
тут мы и сами не знали ответа, по этому не ограничивали участников 

#### Вопрос 43.
В каком веке закончится UnixTime на 32-битных архитектурах?

#### Ответ:
21

#### Вопрос 44.
Как в Linux называется утилита для создания/управления правилами, затрагивающими трафик на bridge интерфейсах?

#### Ответ: 
ebtables

#### Вопрос 45.
В какой таблице iptables можно использовать цели “-j CONNMARK” и “-j MARK” (пометка соединения)?

#### Ответ: 
mangle 

#### Вопрос 46.
Отметьте все сети из списка, которые не являются маршрутизируемыми в глобальной сети Интернет?

1. 10.0.0.0/8
2. 192.168.0.0/16
3. 182.168.0.0/16
4. 172.16.0.0/16
5. 225.0.0.0/8

#### Ответ: 
1,2,4

#### Вопрос 47.
В какой таблице iptables можно изменять значение MSS?

#### Ответ: 
mangle

#### Вопрос 48.
Какой ключик надо обязательно не забыть сказать mdadm-у, если у нас под руками есть развалившийся raid10 массив из шести дисков, который не собирается по mdadm --assemble, и мы хотим попробовать собрать его через mdadm --create (сохранив те же параметры рейда и порядок дисков)?

#### Ответ: 
--assume-clean

#### Вопрос 49.
С помощью какого модуля ядра можно отправить последние сообщения перед аварийной остановкой системы (kernel panic) на соседний сервер, который находится в том же сегменте сети?

#### Ответ: 
netconsole

#### Вопрос 50.
У вас есть свеженалитая host-система с Ubuntu 10.04 с ванильным ядром. 
Вам позарез необходимо поэксперементировать с новой файловой системой POHMELFS и ядром 2.6.37, но перезагружать сервер вы не можете. 
Какая из перечисленных ниже систем виртуализации не подходит для этой задачи?

1. Xen
2. OpenVz
3. Kvm
4. Virtuozzo
5. VmWare server

#### Ответ: 
1, 2, 4

#### Вопрос 51.
Какой класс сетей из перечисленных ниже имеет по умолчанию наибольшее количество хостов:

1. А
2. B
3. C

#### Ответ: 
1

#### Вопрос 52.
На linux маршрутизаторе пакеты маркируются с помощью iptables (-j MARK --set-mark XXX). 
Возможно ли на другой машине, находящейся в том же сегменте локальной сети, прочитать эту метку?

1. да, с помощью iptables .. -m mark --mark XXX
2. нет
3. да, если порт свитча, в который воткнута машина,
находится в режиме mirror

#### Ответ: 
2 

#### Вопрос 53.
Осуществляется передача данных по TCP через канал с latency в 1,5c и 15%-ной потерей пакетов. Достигнута максимальная пропускная способность этого канала. 
Вы можете:

1. Выключить Selective Acknolegments
2. Включить Selective Acknolegments
3. Увеличить объем памяти доступный стеку TCP
4. Уменьшить объем памяти доступный стеку TCP
Что из пречисленного поможет вам увеличить скорость передачи данных? Укажите все возможные варианты.

#### Ответ: 
2

#### Вопрос 54.
В сессии bash Вы пишете команду:
export a='myfile.txt'; echo ${}.
На что нужно заменить (используя matching prefix/suffix patterns в bash), чтобы в результате исполнения было выведено "txt" без кавычек?

#### Ответ: 
a#*. или a##*.

#### Вопрос 55.
Будут ли кешироваться в страничном кеше (pagecahe) обращения к ramdisk (да/нет)?

#### Ответ: 
да

#### Вопрос 56.
Будут ли кешироваться в страничном кеше (pagecahe) обращения к /dev/shm( type: tmpfs) (да/нет)?

#### Ответ: 
да

#### Вопрос 57.
Клиент соединяется с сервером по протоколу https. При этом клиент авторизуется с помощью сертификата. 
У Вас есть доступ к сертификатам сервера и клиента (и только к ним). Можете ли Вы расшифровать подслушанный трафик (да/нет)?

#### Ответ: 
нет
